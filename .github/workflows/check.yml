on: 
  - push
jobs:
  test:
    uses: ./.github/workflows/test.yml
  lint:
    uses: ./.github/workflows/lint.yml
    secrets: inherit
  format:
    needs: [lint, test]
    if: ${{ failure('lint') }}
    uses: ./.github/workflows/format.yml
  build:
    runs-on: ubuntu-latest
    needs: [format]
    steps:
      - run: echo "BUILD"
  deploy:
    runs-on: ubuntu-latest
    needs: [build]
    steps:
      - run: echo "DEPLOY"