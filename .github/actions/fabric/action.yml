name: fabric
description: Runs fabric commands against a particular stack.
inputs:
  task:
    description: The fabric task to execute
  args:
    description: Any arguments to pass
runs:
  using: composite
  steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-python@v3
      with:
        python-version: 3.11
    - shell: bash
      run: |
        pip install --disable-pip-version-check fabric
    - shell: bash
      run:
        fab --dry $(printf "%s" "${{ inputs.task }}") $(printf "%s" "${{ inputs.args }}")